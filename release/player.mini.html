<!DOCTYPE HTML><html><head><meta charset="UTF-8" /><script>configuration={extensions:["ogg","mp3","wav"],autoplay:!0};
function main(){audio=add_element(document.body,"audio",{controls:""});audio.onended=ended_handler;add_element(document.body,"ul",{id:"list"});add_element(document.body,"pre",{id:"console"});autoplay_song=window.location.search.match(/auto=[^&]*/);null!==autoplay_song&&(configuration.autoplaySong=new RegExp(autoplay_song[0].slice(5),"i"));download(window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")+1));document.addEventListener("keydown",keyboard_handler)}
function keyboard_handler(a){switch(a.keyCode){case 32:var b=document.getElementsByTagName("audio")[0];!0===b.paused?b.play():b.pause();a.preventDefault();break;case 39:next_song(1);break;case 37:next_song(-1)}}function ended_handler(a){!0===configuration.autoplay&&next_song(1)}
function next_song(a){audio=document.getElementsByTagName("audio")[0];audio.pause();li=current_song_li();nli=1==a?li.nextElementSibling:li.previousElementSibling;audio.src=nli.attributes.music_path.value;audio.play();li.className="";nli.className="playing"}
function current_song_li(){audio=document.getElementsByTagName("audio")[0];if(void 0!==audio.attributes.src){list=document.getElementById("list").childNodes;for(var a=0;a<list.length-1;a++)if(list[a].attributes.music_path.value===audio.attributes.src.value)return list[a]}}function add_element(a,b,c){b=document.createElement(b);for(var d in c)c.hasOwnProperty(d)&&b.setAttribute(d,c[d]);a.appendChild(b);return b}
function download(a){var b=new XMLHttpRequest;b.open("GET",a);b.onreadystatechange=function(){4===b.readyState&&200===b.status&&parse_page(b.responseText,a)};b.send(null)}function parse_page(a,b){for(var c=(new DOMParser).parseFromString(a,"text/html").getElementsByTagName("a"),d=c.length,g=0;g<d;g++){var e=c[g].getAttribute("href");"/"===e.slice(-1)?"."!==e.slice(0,1)&&download(b+e):!0===correct_filename(e)&&add_music(b,e)}}
function add_music(a,b){li=add_element(document.getElementById("list"),"li",{music_path:[a,b].join("")});f=add_element(li,"span",{"class":"album"});f.appendChild(document.createTextNode(decodeURIComponent(a)));n=add_element(li,"span",{"class":"track"});n.appendChild(document.createTextNode(decodeURIComponent(b)));li.addEventListener("click",change_track);-1!==b.search(configuration.autoplaySong)&&(li.click(),configuration.autoplaySong=/^$/)}
function correct_filename(a){return 0<=configuration.extensions.indexOf(a.split(".").slice(-1)[0])?!0:!1}function change_track(a){li=current_song_li();"object"===typeof li&&(li.className="");for(li=target=a.target;"li"!==li.tagName.toLowerCase();)li=li.parentElement;li.className="playing";src=li.attributes.music_path.value;audio=document.getElementsByTagName("audio")[0];audio.src=src;audio.play()}window.addEventListener("DOMContentLoaded",main);
</script><style>*{margin :0;padding:0;border :0}
html{background:black;color:white}
body{width:100%}
audio{width:100%}
li{background:#222;display:inline;cursor:pointer}
li:after{content:'\A';white-space:pre}
.album{color:#aaf;padding-right:5px}
.track{color:#fda}
.playing{background:#444}
</style></head></html>